<!DOCTYPE html>
<html>
<head>
    <title>ChatGPT Interface</title>
    <script type="module" src="app.js"></script>
    <script src="https://unpkg.com/axios/dist/axios.min.js" defer></script>
    <style>
        #chat-container {
            max-width: 800px;
            margin: 0 auto;
            padding: 10px;
            border: 1px solid #ddd;
        }

        #chat-log {
            height: 300px;
            border: 1px solid #ddd;
            overflow-y: auto;
            margin-bottom: 10px;
            padding: 10px;
        }
        textarea {
            background-color: #e8f5e9; /* very pale green */
        }
        .submit-button {
            background-color: lightgreen;
        }
        .print-button {
            background-color: lightyellow;
        }
        .task-textbox {
            background-color: #f0f0f0; /* light gray */
            border: 1px solid #ccc;
            margin-bottom: 10px;
            padding: 30px;
            width: calc(80% - 20px); /* Adjust width as needed */
            border-radius: 8px; /* Add border radius */
        }        
        .hidden {
            display: none; /* Initially hide the task textboxes */
        }
    </style>
</head>

<body>
    <h1>Chat with GPT</h1>
    <div id="chat-container">
        <h2>Chat log</h2>
        <div id="chat-log"></div>
        <button id="printChat" class="print-button">Print chat log</button>
        <h2>Your input</h2>
        <textarea id="prompt" rows="4" cols="50"></textarea><br>
        <button id="sendPrompt" class="submit-button">Submit input</button>
        <h2>Task Textboxes</h2>
        <!-- Non-modifiable textboxes for storing tasks -->
        <div id="task-container"></div> <!-- Container for task textboxes -->
        <p id="timer">Time remaining: <span id="time"></span></p>

    </div>

    <script>
        var seconds = 180;

        function hideTaskTextboxes() {
            var taskTextboxes = document.getElementsByClassName('task-textbox');
            for (var i = 0; i < taskTextboxes.length; i++) {
                taskTextboxes[i].classList.add('hidden'); // Add 'hidden' class to hide
            }
        }

        var countDown = function() {
            seconds--;
            document.getElementById("time").innerHTML =  seconds + " seconds ";
            if (seconds <= 0) {
                clearInterval(myVar);
                document.getElementById("timer").innerHTML = "Time is up!";
                hideTaskTextboxes();
            }
        };
        var myVar = setInterval(countDown, 1000);

        // Dynamically insert task textboxes into the DOM
        document.addEventListener("DOMContentLoaded", function() {
            var taskContainer = document.getElementById("task-container");
            var tasks = [
                "Task 1:\nStudent role: You are organizing an event in which local businesses' products are showcased to the public. You would like to use a photograph (you already have the photograph) of one local businesses' products in the event flyer. Meet and speak with Mr. Blair- the business owner- to ask for permission. Initiate the conversation, make your request, and complete the conversation.",
                "Task 2:\nStudent role: You have a close friend who is an international student at university. You want to practice your English conversation skill next week, so you meet and speak with the friend asking if they spend five minutes of their time talking with you in English. Initiate the conversation, make your request, and complete the conversation.",
                "Task 3:\nStudent role: You and a classmate (a friend) are working together on a research project. Both of you are scheduled to give an important presentation two days from now on the project. However, you realize you have a conflict in your schedule. Meet and speak with your classmate asking him/her to present both your part of the presentation and theirs. This will be considerable extra work for your classmate. Initiate the conversation, make your request, and complete the conversation.",
                "Task 4:\nStudent role: You are organizing a university event in which local businessesâ€™ products are showcased to the public. To help fund the event, you want local business people to make financial donations. Meet and speak with Mr. Smith- a local business owner in Aizu-wakamatsu- to ask for a financial donation. You do not know Mr. Smith. Initiate the conversation, make your request, and complete the conversation."
            ];
            tasks.forEach(function(task) {
                var textarea = document.createElement("textarea");
                textarea.classList.add("task-textbox"); // Initially show the task textboxes
                textarea.readOnly = true;
                textarea.value = task;
                taskContainer.appendChild(textarea);
            });
        });
    </script>
</body>
</html>
